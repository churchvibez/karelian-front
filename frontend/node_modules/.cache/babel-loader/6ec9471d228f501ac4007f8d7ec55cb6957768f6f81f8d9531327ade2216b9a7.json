{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// constants\nvar HTML = 'html';\nvar HEAD = 'head';\nvar BODY = 'body';\nvar FIRST_TAG_REGEX = /<([a-zA-Z]+[0-9]?)/; // e.g., <h1>\n// match-all-characters in case of newlines (DOTALL)\nvar HEAD_TAG_REGEX = /<head[^]*>/i;\nvar BODY_TAG_REGEX = /<body[^]*>/i;\n// falls back to `parseFromString` if `createHTMLDocument` cannot be used\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar parseFromDocument = function (html, tagName) {\n  /* istanbul ignore next */\n  throw new Error('This browser does not support `document.implementation.createHTMLDocument`');\n};\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar parseFromString = function (html, tagName) {\n  /* istanbul ignore next */\n  throw new Error('This browser does not support `DOMParser.prototype.parseFromString`');\n};\nvar DOMParser = typeof window === 'object' && window.DOMParser;\n/**\r\n * DOMParser (performance: slow).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/API/DOMParser#Parsing_an_SVG_or_HTML_document\r\n */\nif (typeof DOMParser === 'function') {\n  var domParser_1 = new DOMParser();\n  var mimeType_1 = 'text/html';\n  /**\r\n   * Creates an HTML document using `DOMParser.parseFromString`.\r\n   *\r\n   * @param html - The HTML string.\r\n   * @param tagName - The element to render the HTML (with 'body' as fallback).\r\n   * @returns - Document.\r\n   */\n  parseFromString = function (html, tagName) {\n    if (tagName) {\n      /* istanbul ignore next */\n      html = \"<\".concat(tagName, \">\").concat(html, \"</\").concat(tagName, \">\");\n    }\n    return domParser_1.parseFromString(html, mimeType_1);\n  };\n  parseFromDocument = parseFromString;\n}\n/**\r\n * DOMImplementation (performance: fair).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/API/DOMImplementation/createHTMLDocument\r\n */\nif (typeof document === 'object' && document.implementation) {\n  var htmlDocument_1 = document.implementation.createHTMLDocument();\n  /**\r\n   * Use HTML document created by `document.implementation.createHTMLDocument`.\r\n   *\r\n   * @param html - The HTML string.\r\n   * @param tagName - The element to render the HTML (with 'body' as fallback).\r\n   * @returns - Document\r\n   */\n  parseFromDocument = function (html, tagName) {\n    if (tagName) {\n      var element = htmlDocument_1.documentElement.querySelector(tagName);\n      if (element) {\n        element.innerHTML = html;\n      }\n      return htmlDocument_1;\n    }\n    htmlDocument_1.documentElement.innerHTML = html;\n    return htmlDocument_1;\n  };\n}\n/**\r\n * Template (performance: fast).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/template\r\n */\nvar template = typeof document === 'object' && document.createElement('template');\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar parseFromTemplate;\nif (template && template.content) {\n  /**\r\n   * Uses a template element (content fragment) to parse HTML.\r\n   *\r\n   * @param html - HTML string.\r\n   * @returns - Nodes.\r\n   */\n  parseFromTemplate = function (html) {\n    template.innerHTML = html;\n    return template.content.childNodes;\n  };\n}\n/**\r\n * Parses HTML string to DOM nodes.\r\n *\r\n * @param html - HTML markup.\r\n * @returns - DOM nodes.\r\n */\nfunction domparser(html) {\n  var _a, _b;\n  var match = html.match(FIRST_TAG_REGEX);\n  var firstTagName = match && match[1] ? match[1].toLowerCase() : '';\n  switch (firstTagName) {\n    case HTML:\n      {\n        var doc = parseFromString(html);\n        // the created document may come with filler head/body elements,\n        // so make sure to remove them if they don't actually exist\n        if (!HEAD_TAG_REGEX.test(html)) {\n          var element = doc.querySelector(HEAD);\n          (_a = element === null || element === void 0 ? void 0 : element.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n        }\n        if (!BODY_TAG_REGEX.test(html)) {\n          var element = doc.querySelector(BODY);\n          (_b = element === null || element === void 0 ? void 0 : element.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(element);\n        }\n        return doc.querySelectorAll(HTML);\n      }\n    case HEAD:\n    case BODY:\n      {\n        var elements = parseFromDocument(html).querySelectorAll(firstTagName);\n        // if there's a sibling element, then return both elements\n        if (BODY_TAG_REGEX.test(html) && HEAD_TAG_REGEX.test(html)) {\n          return elements[0].parentNode.childNodes;\n        }\n        return elements;\n      }\n    // low-level tag or text\n    default:\n      {\n        if (parseFromTemplate) {\n          return parseFromTemplate(html);\n        }\n        var element = parseFromDocument(html, BODY).querySelector(BODY);\n        return element.childNodes;\n      }\n  }\n}\nexports.default = domparser;","map":{"version":3,"names":["HTML","HEAD","BODY","FIRST_TAG_REGEX","HEAD_TAG_REGEX","BODY_TAG_REGEX","parseFromDocument","html","tagName","Error","parseFromString","DOMParser","window","domParser_1","mimeType_1","concat","document","implementation","htmlDocument_1","createHTMLDocument","element","documentElement","querySelector","innerHTML","template","createElement","parseFromTemplate","content","childNodes","domparser","match","firstTagName","toLowerCase","doc","test","_a","parentNode","removeChild","_b","querySelectorAll","elements","exports","default"],"sources":["D:\\GIT\\projects\\tppo\\karelian-front\\frontend\\node_modules\\html-dom-parser\\src\\client\\domparser.ts"],"sourcesContent":["// constants\r\nconst HTML = 'html';\r\nconst HEAD = 'head';\r\nconst BODY = 'body';\r\nconst FIRST_TAG_REGEX = /<([a-zA-Z]+[0-9]?)/; // e.g., <h1>\r\n\r\n// match-all-characters in case of newlines (DOTALL)\r\nconst HEAD_TAG_REGEX = /<head[^]*>/i;\r\nconst BODY_TAG_REGEX = /<body[^]*>/i;\r\n\r\n// falls back to `parseFromString` if `createHTMLDocument` cannot be used\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nlet parseFromDocument = (html: string, tagName?: string): Document => {\r\n  /* istanbul ignore next */\r\n  throw new Error(\r\n    'This browser does not support `document.implementation.createHTMLDocument`',\r\n  );\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nlet parseFromString = (html: string, tagName?: string): Document => {\r\n  /* istanbul ignore next */\r\n  throw new Error(\r\n    'This browser does not support `DOMParser.prototype.parseFromString`',\r\n  );\r\n};\r\n\r\nconst DOMParser = typeof window === 'object' && window.DOMParser;\r\n\r\n/**\r\n * DOMParser (performance: slow).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/API/DOMParser#Parsing_an_SVG_or_HTML_document\r\n */\r\nif (typeof DOMParser === 'function') {\r\n  const domParser = new DOMParser();\r\n  const mimeType = 'text/html';\r\n\r\n  /**\r\n   * Creates an HTML document using `DOMParser.parseFromString`.\r\n   *\r\n   * @param html - The HTML string.\r\n   * @param tagName - The element to render the HTML (with 'body' as fallback).\r\n   * @returns - Document.\r\n   */\r\n  parseFromString = (html: string, tagName?: string): Document => {\r\n    if (tagName) {\r\n      /* istanbul ignore next */\r\n      html = `<${tagName}>${html}</${tagName}>`;\r\n    }\r\n\r\n    return domParser.parseFromString(html, mimeType);\r\n  };\r\n\r\n  parseFromDocument = parseFromString;\r\n}\r\n\r\n/**\r\n * DOMImplementation (performance: fair).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/API/DOMImplementation/createHTMLDocument\r\n */\r\nif (typeof document === 'object' && document.implementation) {\r\n  const htmlDocument = document.implementation.createHTMLDocument();\r\n\r\n  /**\r\n   * Use HTML document created by `document.implementation.createHTMLDocument`.\r\n   *\r\n   * @param html - The HTML string.\r\n   * @param tagName - The element to render the HTML (with 'body' as fallback).\r\n   * @returns - Document\r\n   */\r\n  parseFromDocument = function (html: string, tagName?: string): Document {\r\n    if (tagName) {\r\n      const element = htmlDocument.documentElement.querySelector(tagName);\r\n\r\n      if (element) {\r\n        element.innerHTML = html;\r\n      }\r\n\r\n      return htmlDocument;\r\n    }\r\n\r\n    htmlDocument.documentElement.innerHTML = html;\r\n    return htmlDocument;\r\n  };\r\n}\r\n\r\n/**\r\n * Template (performance: fast).\r\n *\r\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/template\r\n */\r\nconst template =\r\n  typeof document === 'object' && document.createElement('template');\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nlet parseFromTemplate: (html: string) => NodeList;\r\n\r\nif (template && template.content) {\r\n  /**\r\n   * Uses a template element (content fragment) to parse HTML.\r\n   *\r\n   * @param html - HTML string.\r\n   * @returns - Nodes.\r\n   */\r\n  parseFromTemplate = (html: string): NodeList => {\r\n    template.innerHTML = html;\r\n    return template.content.childNodes;\r\n  };\r\n}\r\n\r\n/**\r\n * Parses HTML string to DOM nodes.\r\n *\r\n * @param html - HTML markup.\r\n * @returns - DOM nodes.\r\n */\r\nexport default function domparser(html: string): NodeList {\r\n  const match = html.match(FIRST_TAG_REGEX);\r\n  const firstTagName = match && match[1] ? match[1].toLowerCase() : '';\r\n\r\n  switch (firstTagName) {\r\n    case HTML: {\r\n      const doc = parseFromString(html);\r\n\r\n      // the created document may come with filler head/body elements,\r\n      // so make sure to remove them if they don't actually exist\r\n      if (!HEAD_TAG_REGEX.test(html)) {\r\n        const element = doc.querySelector(HEAD);\r\n        element?.parentNode?.removeChild(element);\r\n      }\r\n\r\n      if (!BODY_TAG_REGEX.test(html)) {\r\n        const element = doc.querySelector(BODY);\r\n        element?.parentNode?.removeChild(element);\r\n      }\r\n\r\n      return doc.querySelectorAll(HTML);\r\n    }\r\n\r\n    case HEAD:\r\n    case BODY: {\r\n      const elements = parseFromDocument(html).querySelectorAll(firstTagName);\r\n\r\n      // if there's a sibling element, then return both elements\r\n      if (BODY_TAG_REGEX.test(html) && HEAD_TAG_REGEX.test(html)) {\r\n        return elements[0].parentNode!.childNodes;\r\n      }\r\n\r\n      return elements;\r\n    }\r\n\r\n    // low-level tag or text\r\n    default: {\r\n      if (parseFromTemplate) {\r\n        return parseFromTemplate(html);\r\n      }\r\n      const element = parseFromDocument(html, BODY).querySelector(BODY);\r\n      return element!.childNodes;\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}